<?xml version="1.0" encoding="UTF-8"?>
<plugin>

   <!-- ðŸ”¹ Perspective -->
   <extension point="org.eclipse.ui.perspectives">
      <perspective
            name="OllamAssist"
            icon="icons/images.png"
            class="com.ollamassist.plugin.ui.OllamPerspective"
            id="com.ollamassist.plugin.ui.OllamPerspective"/>
   </extension>

   <!-- ðŸ”¹ Chat View -->
   <extension point="org.eclipse.ui.views">
      <view
            name="OllamAssist"
            icon="icons/images.png"
            class="com.ollamassist.plugin.ui.ChatView"
            id="com.ollamassist.plugin.ui.ChatView"/>
   </extension>

   <!-- ðŸ”¹ Editor with Autocomplete -->
   <extension point="org.eclipse.ui.editors">
      <editor
            id="com.ollamassist.plugin.autocomplete.OllamaEditor"
            name="Ollama Editor"
            icon="icons/images.png"
            class="com.ollamassist.plugin.autocomplete.OllamaEditor"
            extensions="java,txt"/>
   </extension>

   <!-- ðŸ”¹ Place Chat View on Left -->
   <extension point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension targetID="com.ollamassist.plugin.ui.OllamPerspective">
         <view
            id="com.ollamassist.plugin.ui.ChatView"
            icon="icons/images.png"
            relative="org.eclipse.ui.editors"
            relationship="left"
            visible="true"
            ratio="0.25"/>
      </perspectiveExtension>
   </extension>

   <!-- ðŸ”¹ First-Time Setup Wizard -->
   <extension point="org.eclipse.ui.startup">
      <startup class="com.ollamassist.plugin.setup.SetupWizardLauncher"/>
   </extension>

   <!-- ðŸ”¹ Preferences Page -->
   <extension point="org.eclipse.ui.preferencePages">
      <page
            id="com.ollamassist.plugin.preferences"
            name="OllamAssist"
            icon="icons/images.png"
            class="com.ollamassist.plugin.preferences.OllamAssistPreferencePage"/>
   </extension>

   <!-- ðŸ”¹ Command Category (corrected) -->
   <extension point="org.eclipse.ui.commands">
      <category
            id="com.ollamassist.plugin.category"
            name="OllamAssist Commands"/>
   </extension>

   <!-- ðŸ”¹ Setup Wizard Command -->
   <extension point="org.eclipse.ui.commands">
      <command
            id="com.ollamassist.plugin.setup.command"
            name="Run OllamAssist Setup Wizard"
            categoryId="com.ollamassist.plugin.category"/>
   </extension>

   <extension point="org.eclipse.ui.handlers">
      <handler
            commandId="com.ollamassist.plugin.setup.command"
            class="com.ollamassist.plugin.setup.SetupWizardHandler"/>
   </extension>

   <!-- ðŸ”¹ Menu Item in Help -->
   <extension point="org.eclipse.ui.menus">
      <menuContribution locationURI="menu:help">
         <command
               commandId="com.ollamassist.plugin.setup.command"
               label="OllamAssist Setup Wizard"
               icon="icons/images.png"
               style="push"/>
      </menuContribution>
   </extension>

   <!-- âœ… Reopen Chat View Command -->
   <extension point="org.eclipse.ui.commands">
      <command
            id="com.ollamassist.plugin.command.openChatView"
            name="Open OllamAssist Chat View"
            description="Reopen the OllamAssist Chat View"
            categoryId="com.ollamassist.plugin.category"/>
   </extension>

   <extension point="org.eclipse.ui.handlers">
      <handler
            commandId="com.ollamassist.plugin.command.openChatView"
            class="com.ollamassist.plugin.handlers.OpenChatViewHandler"/>
   </extension>

   <extension point="org.eclipse.ui.menus">
      <menuContribution locationURI="menu:help">
         <command
               commandId="com.ollamassist.plugin.command.openChatView"
               label="Reopen OllamAssist Chat"
               icon="icons/images.png"
               style="push"/>
      </menuContribution>
   </extension>

   <!-- ðŸ”¹ Java Autocomplete -->
   <extension point="org.eclipse.jdt.ui.javaCompletionProposalComputer">
      <proposalComputer
            name="OllamAssist Proposals"
            class="com.ollamassist.plugin.autocomplete.OllamaProposalComputer"
            categoryId="com.ollamassist.plugin.category"
            id="com.ollamassist.plugin.autocomplete.proposals"/>
   </extension>

</plugin>
